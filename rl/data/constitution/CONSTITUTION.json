{
  "$schema": "https://taste.ai/schemas/constitution/v1.0.0",
  "name": "Taste AI Constitutional Principles",
  "version": "1.0.0",
  "description": "Master constitutional document for intent rule generation, preference learning, and design understanding",
  
  "references": {
    "constitutional_ai_paper": {
      "title": "Constitutional AI: Harmlessness from AI Feedback",
      "authors": ["Yuntao Bai", "Saurav Kadavath", "et al."],
      "organization": "Anthropic",
      "url": "https://arxiv.org/pdf/2212.08073",
      "year": 2022,
      "relevance": "Foundational methodology for using principles to guide AI behavior without extensive human labeling"
    }
  },
  
  "sources": [
    {
      "id": "action_rules",
      "path": "./sources/action_rules.json",
      "description": "Principles for interpreting user action sequences"
    },
    {
      "id": "interpretation_rules", 
      "path": "./sources/interpretation_rules.json",
      "description": "Principles for describing and abstracting intent"
    },
    {
      "id": "quality_signals",
      "path": "./sources/quality_signals.json",
      "description": "Training quality metrics and thresholds"
    },
    {
      "id": "design_taxonomy",
      "path": "./sources/design_taxonomy.json",
      "description": "Design styles, elements, and consumer intent mappings"
    }
  ],

  "principle_categories": {
    "action": {
      "description": "How to interpret user action sequences into intent",
      "source": "action_rules",
      "training_phase": ["generation", "preference"]
    },
    "interpretation": {
      "description": "How to describe and abstract intent patterns",
      "source": "interpretation_rules", 
      "training_phase": ["generation"]
    },
    "quality": {
      "description": "What makes a rule high-quality for training",
      "source": "quality_signals",
      "training_phase": ["filtering", "preference"]
    },
    "style": {
      "description": "Design style recognition and mapping",
      "source": "design_taxonomy",
      "training_phase": ["generation", "preference"]
    },
    "consumer_intent": {
      "description": "Mapping user language to design decisions",
      "source": "design_taxonomy",
      "training_phase": ["generation", "preference"]
    }
  },

  "consolidated_principles": {
    "action_rules": [
      {
        "id": "iteration_signal",
        "name": "Iteration Signal",
        "priority": 1,
        "description": "When a component is returned to in a subsequent action, this indicates iterative refinement",
        "training_weight": 1.5,
        "confidence_boost": 0.15
      },
      {
        "id": "temporal_batching",
        "name": "Temporal Batching", 
        "priority": 2,
        "description": "Rapid action sequences (within ~2 seconds) typically form a single intent unit",
        "training_weight": 1.2
      },
      {
        "id": "proximity_clustering",
        "name": "Proximity Clustering",
        "priority": 3,
        "description": "Actions on spatially adjacent elements often share intent",
        "training_weight": 1.1
      },
      {
        "id": "selection_scope",
        "name": "Selection Scope Signal",
        "priority": 4,
        "description": "Multi-selection indicates batch intent vs individual refinement",
        "training_weight": 1.1
      },
      {
        "id": "undo_redo_signal",
        "name": "Undo/Redo Signal",
        "priority": 5,
        "description": "Undo operations signal dissatisfaction; post-redo state is preferred",
        "training_weight": 1.3,
        "preference_signal": "rejection_indicator"
      },
      {
        "id": "property_correlation",
        "name": "Property Correlation",
        "priority": 6,
        "description": "Simultaneous changes to related properties suggest unified intent",
        "training_weight": 1.2
      },
      {
        "id": "hierarchical_propagation",
        "name": "Hierarchical Propagation",
        "priority": 7,
        "description": "Changes to parent elements affecting children indicate structural intent",
        "training_weight": 1.2
      }
    ],
    
    "interpretation_rules": [
      {
        "id": "descriptive_not_prescriptive",
        "name": "Descriptive, Not Prescriptive",
        "priority": 1,
        "description": "Rules describe what kind of choice was made, not whether it was good",
        "training_weight": 1.0
      },
      {
        "id": "observable_grounding",
        "name": "Observable Grounding",
        "priority": 2,
        "description": "Every rule claim must be traceable to observable action data",
        "training_weight": 1.3
      },
      {
        "id": "minimal_assumption",
        "name": "Minimal Assumption",
        "priority": 3,
        "description": "Prefer simpler explanations over complex ones (Occam's Razor)",
        "training_weight": 1.1
      },
      {
        "id": "abstraction_consistency",
        "name": "Abstraction Consistency",
        "priority": 4,
        "description": "Maintain consistent abstraction level within a rule set",
        "training_weight": 1.0
      }
    ],
    
    "quality_signals": [
      {
        "id": "novelty_over_redundancy",
        "name": "Novelty Over Redundancy",
        "description": "Novel patterns more valuable than variations of common patterns",
        "threshold": {"min_novelty": 0.3, "high_value": 0.7},
        "training_weight": 1.2
      },
      {
        "id": "completeness_requirement",
        "name": "Completeness Requirement",
        "description": "Rules must have complete platform context",
        "required_fields": ["platform", "extraction_method", "data_source"],
        "training_weight": 1.1
      },
      {
        "id": "confidence_calibration",
        "name": "Confidence Calibration",
        "description": "Confidence scores must reflect genuine pattern clarity",
        "calibration": {
          "high": {"min": 0.8},
          "medium": {"min": 0.5, "max": 0.8},
          "low": {"max": 0.5}
        },
        "training_weight": 1.0
      }
    ],
    
    "preference_rules": [
      {
        "id": "iteration_aware_preference",
        "name": "Iteration-Aware Preference",
        "description": "Rules recognizing iteration patterns preferred over isolated action descriptions",
        "training_weight": 1.4,
        "examples": {
          "preferred": "User iteratively refines component spacing",
          "rejected": "User changes padding twice"
        }
      },
      {
        "id": "semantic_depth_preference",
        "name": "Semantic Depth Preference",
        "description": "Rules with richer semantic content preferred over shallow descriptions",
        "training_weight": 1.3,
        "examples": {
          "preferred": "User adjusts typography for visual hierarchy",
          "rejected": "User changes font size"
        }
      },
      {
        "id": "style_awareness_preference",
        "name": "Style Awareness Preference",
        "description": "Rules that identify design style patterns preferred over style-agnostic rules",
        "training_weight": 1.3,
        "examples": {
          "preferred": "User applies minimalist composition with generous whitespace",
          "rejected": "User adds spacing"
        }
      },
      {
        "id": "consumer_intent_preference",
        "name": "Consumer Intent Preference",
        "description": "Rules translating consumer language to design decisions preferred",
        "training_weight": 1.4,
        "examples": {
          "preferred": "User refines design for 'premium' feel using thin serif and whitespace",
          "rejected": "User changes font and adds space"
        }
      },
      {
        "id": "platform_grounded_preference",
        "name": "Platform-Grounded Preference",
        "description": "Rules with complete platform context preferred over decontextualized rules",
        "training_weight": 1.2
      }
    ]
  },

  "training_config": {
    "preference_generation": {
      "strategies": [
        {"name": "confidence", "weight": 1.0},
        {"name": "quality", "weight": 1.0},
        {"name": "completeness", "weight": 0.8},
        {"name": "novelty", "weight": 1.0},
        {"name": "constitutional", "weight": 1.2}
      ],
      "constitutional_boost": 1.2,
      "iteration_boost": 1.5
    },
    "rule_generation": {
      "apply_constitutional_principles": true,
      "required_metadata": ["iteration_detected", "constitutional_signals"],
      "confidence_boosts": {
        "iteration_signal": 0.15,
        "style_recognition": 0.10,
        "consumer_intent_match": 0.10
      }
    }
  },

  "usage": {
    "generator_prompt": "Embed consolidated_principles in LLM prompt for rule generation",
    "preference_generator": "Use preference_rules to construct synthetic preference pairs",
    "quality_filter": "Apply quality_signals thresholds before training",
    "style_detection": "Use design_taxonomy for style and intent recognition"
  },

  "changelog": [
    {
      "version": "1.0.0",
      "date": "2026-01-23",
      "changes": [
        "Initial master constitution consolidating all sources",
        "Added design taxonomy from Taste_AI_Design_Taxonomy_Restructured.xlsx",
        "Referenced Constitutional AI paper (Anthropic, 2022)"
      ]
    }
  ]
}



